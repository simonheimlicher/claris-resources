{{- $page := .Page }}
{{- $logoImageSpec := default site.Params.logo .resource }}
{{- $logoImageWidth := default 96 .width }}
{{- $logoImageHeight := default $logoImageWidth .height }}
{{- $template := "claris/_functions/resources/images/logo-image" }}

{{- $logoImageResource := false }}

{{- with $logoImageSpec }}
  {{- $logoImageParams := (dict
    "resource" .
    "width" $logoImageWidth
    "height" $logoImageHeight
  ) }}
  {{- $logoImageResource = partialCached "claris/_functions/resources/images/get-process-image" (merge $logoImageParams 
      (dict "Page" $page)) $logoImageParams -}}

  {{- if not $logoImageResource }}
    {{- errorf "[%s]: Logo image matching .resource='%v' not found" $template $logoImageSpec }}
  {{- end }}
{{- /* {{- else }}
  {{- warnf "[%s]: invalid logo image: .LogoImageSpec='%v'" $template $logoImageSpec }} */ -}}
{{- end }}

{{- return $logoImageResource -}}
